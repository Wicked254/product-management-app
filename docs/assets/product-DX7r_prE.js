import{N as d,u as o,j as e}from"./index-DIrkmhLv.js";const u=d("product",{state:()=>({products:[],isLoading:!1,error:null}),actions:{async fetchProducts(){this.isLoading=!0,this.error=null;try{const r=o(),t=await e.get("https://dummyjson.com/products",{headers:{Authorization:`Bearer ${r.token}`}});this.products=t.data.products}catch(r){this.error=r.message}finally{this.isLoading=!1}},async fetchProductById(r){this.isLoading=!0,this.error=null;try{const t=o();return(await e.get(`https://dummyjson.com/products/${r}`,{headers:{Authorization:`Bearer ${t.token}`}})).data}catch(t){throw this.error=t.message,t}finally{this.isLoading=!1}},async addProduct(r){this.isLoading=!0,this.error=null;try{const t=o(),s=await e.post("https://dummyjson.com/products/add",r,{headers:{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"}});return this.products.push(s.data),s.data}catch(t){throw this.error=t.message,t}finally{this.isLoading=!1}},async updateProduct(r,t){this.isLoading=!0,this.error=null;try{const s=o(),a=await e.put(`https://dummyjson.com/products/${r}`,t,{headers:{Authorization:`Bearer ${s.token}`,"Content-Type":"application/json"}}),i=this.products.findIndex(n=>n.id===r);return i!==-1&&(this.products[i]=a.data),a.data}catch(s){throw this.error=s.message,s}finally{this.isLoading=!1}},async deleteProduct(r){this.isLoading=!0,this.error=null;try{const t=o();await e.delete(`https://dummyjson.com/products/${r}`,{headers:{Authorization:`Bearer ${t.token}`}}),this.products=this.products.filter(s=>s.id!==r)}catch(t){throw this.error=t.message,t}finally{this.isLoading=!1}}}});export{u};
