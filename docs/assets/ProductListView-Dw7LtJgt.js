import{u as P,r as c,i as A,j as y,k as D,c as n,b as O,a as t,l as b,m as h,n as f,h as F,e as v,v as H,p as M,F as S,q as C,d as p,t as r,o as l}from"./index-DIrkmhLv.js";import{u as N}from"./product-DX7r_prE.js";const T={class:"flex min-h-screen bg-gray-100 relative"},U={class:"flex-1 p-2 sm:p-4 lg:p-8 transition-all duration-300 ease-in-out"},$={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},I={class:"flex flex-col gap-3 mb-6"},E={class:"relative"},R={class:"flex flex-col sm:flex-row gap-3"},q=["value"],Q={key:0,class:"text-center py-10 text-lg font-medium"},G={key:1,class:"text-red-500 text-center py-10"},J={key:2,class:"w-full bg-white shadow-xl rounded-xl overflow-x-auto border border-gray-200"},K={class:"w-full divide-y divide-gray-200"},W={class:"divide-y divide-gray-200"},X=["onClick"],Y={class:"p-4 flex items-center"},Z=["src","alt"],tt={class:"font-medium text-gray-800"},et={class:"text-sm text-gray-500"},ot={class:"p-4 hidden md:table-cell"},st={class:"p-4 font-medium text-gray-700"},rt={class:"p-4"},nt={class:"flex items-center"},lt={class:"text-gray-700"},at={class:"text-sm text-gray-500 ml-1"},it={class:"mt-6 flex justify-between items-center text-gray-500 text-sm"},gt={__name:"ProductListView",setup(dt){const i=N(),j=P(),x=F(),m=c(""),u=c(""),d=c(""),w=c([]),g=c(!1);A(async()=>{await i.fetchProducts();try{const s=await y.get("https://dummyjson.com/products/category-list");w.value=s.data.map(e=>({slug:e,name:e.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")}))}catch(s){console.error("Failed to fetch primary category list, trying fallback:",s);try{const e=await y.get("https://dummyjson.com/products/categories");w.value=e.data.map(o=>({slug:o,name:o.split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}))}catch(e){console.error("Failed to fetch categories from fallback endpoint as well:",e)}}});const k=D(()=>i.products.filter(s=>{const e=s.title.toLowerCase().includes(m.value.toLowerCase()),o=!u.value||s.category===u.value;let a=!0;return d.value==="In Stock"?a=s.stock>50:d.value==="Low Stock"?a=s.stock>0&&s.stock<=50:d.value==="Out of Stock"&&(a=s.stock===0),e&&o&&a})),_=s=>s>50?"bg-green-500":s>0?"bg-orange-500":"bg-red-500",B=s=>s>50?"In Stock":s>0?"Low Stock":"Out of Stock",L=()=>x.push("/products/new"),z=s=>x.push(`/products/${s}`),V=()=>{j.logout(),x.push("/login")};return(s,e)=>(l(),n("div",T,[g.value?(l(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:e[0]||(e[0]=o=>g.value=!1)})):O("",!0),t("aside",{class:f(["fixed lg:relative inset-y-0 left-0 z-50 w-64 lg:w-72 bg-white shadow-md flex flex-col justify-between transform transition-transform duration-300 ease-in-out border-r border-gray-200",g.value?"translate-x-0":"-translate-x-full lg:translate-x-0"]),style:{padding:"0","background-color":"#ffffff",color:"#4b5563"}},[e[7]||(e[7]=b('<div><div class="flex items-center p-4 border-b border-gray-200 mb-6"><div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-sm font-semibold text-white mr-3"> D </div><span class="font-semibold text-lg text-gray-800">DigiBuy<br>Admin Panel</span></div><nav class="space-y-1 px-4"><a href="#" class="flex items-center p-3 rounded-lg text-gray-600 hover:bg-indigo-50-600 hover:text-indigo-700 transition-colors duration-150"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg> Dashboard </a><a href="#" class="flex items-center p-3 rounded-lg text-white font-semibold bg-indigo-600 shadow-md"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7L4 7M10 7L10 17M14 7L14 17M18 7L18 17M6 7L6 17M20 7V17a2 2 0 01-2 2H6a2 2 0 01-2-2V7"></path></svg> Products </a><a href="#" class="flex items-center p-3 rounded-lg text-gray-600 hover:bg-indigo-50-600 hover:text-indigo-700 transition-colors duration-150"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg> Orders </a><a href="#" class="flex items-center p-3 rounded-lg text-gray-600 hover:bg-indigo-50-600 hover:text-indigo-700 transition-colors duration-150"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2m14-4a5 5 0 100-10 5 5 0 000 10zm-7-5a5 5 0 100-10 5 5 0 000 10z"></path></svg> Customers </a></nav></div>',1)),t("div",{class:"px-4 pb-4 space-y-2"},[e[6]||(e[6]=t("a",{href:"#",class:"flex items-center p-3 rounded-lg text-gray-600 hover:bg-indigo-50-600 hover:text-indigo-700 transition-colors duration-150"},[t("svg",{class:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),h(" Settings ")],-1)),t("button",{onClick:V,class:"w-full py-3 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center justify-center font-medium transition-colors duration-150"},[...e[5]||(e[5]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),h(" Logout ",-1)])])])],2),t("main",U,[t("div",$,[t("button",{onClick:e[1]||(e[1]=o=>g.value=!0),class:"lg:hidden p-2 rounded-md text-gray-600 hover:bg-gray-200"},[...e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-800"},"DigiBuy Products"),t("p",{class:"text-sm sm:text-base text-gray-500"},"Manage your inventory and view product performance.")],-1)),t("button",{onClick:L,class:"w-full sm:w-auto py-2 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center justify-center sm:justify-start font-medium transition-colors duration-150"},[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m-8-8h16"})],-1),h(" Add New Product ",-1)])])]),t("div",I,[t("div",E,[v(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),placeholder:"Search by product name...",class:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-gray-50 focus:ring-indigo-500 focus:border-indigo-500 text-black"},null,512),[[H,m.value]]),e[11]||(e[11]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t("div",R,[v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),class:"p-3 border border-gray-300 rounded-lg bg-gray-50 flex-1 sm:w-auto focus:ring-indigo-500 focus:border-indigo-500 text-black"},[e[12]||(e[12]=t("option",{value:""},"Category",-1)),(l(!0),n(S,null,C(w.value,o=>(l(),n("option",{key:o.slug,value:o.slug},r(o.name),9,q))),128))],512),[[M,u.value]]),v(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),class:"p-3 border border-gray-300 rounded-lg bg-gray-50 flex-1 sm:w-auto focus:ring-indigo-500 focus:border-indigo-500 text-black"},[...e[13]||(e[13]=[t("option",{value:""},"Stock Status",-1),t("option",{value:"In Stock"},"In Stock",-1),t("option",{value:"Low Stock"},"Low Stock",-1),t("option",{value:"Out of Stock"},"Out of Stock",-1)])],512),[[M,d.value]])])]),p(i).isLoading?(l(),n("div",Q,"Loading products...")):p(i).error?(l(),n("div",G,r(p(i).error),1)):(l(),n("div",J,[t("table",K,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"p-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Product"),t("th",{class:"p-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider hidden md:table-cell"},"Category"),t("th",{class:"p-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Price"),t("th",{class:"p-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Stock"),t("th",{class:"p-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"})])],-1)),t("tbody",W,[(l(!0),n(S,null,C(k.value,o=>(l(),n("tr",{key:o.id,class:"cursor-pointer hover:bg-gray-50 transition-colors duration-150",onClick:a=>z(o.id)},[t("td",Y,[t("img",{src:o.thumbnail,class:"w-12 h-12 object-cover rounded-md mr-4",alt:o.title},null,8,Z),t("div",null,[t("p",tt,r(o.title),1),t("p",et,r(o.description.slice(0,50))+"...",1)])]),t("td",ot,[t("span",{class:f(["px-3 py-1 text-sm rounded-full",{"bg-blue-100 text-blue-800":o.category==="electronics","bg-purple-100 text-purple-800":o.category==="groceries","bg-red-100 text-red-800":o.category==="apparel"||o.category==="fashion","bg-yellow-100 text-yellow-800":o.category==="home-decoration"}])},r(o.category),3)]),t("td",st,"$"+r(o.price.toFixed(2)),1),t("td",rt,[t("div",nt,[t("span",{class:f(["w-2.5 h-2.5 rounded-full mr-2",_(o.stock)])},null,2),t("span",lt,r(o.stock),1),t("span",at,"("+r(B(o.stock))+")",1)])]),e[14]||(e[14]=t("td",{class:"p-4 text-right"},[t("svg",{class:"w-5 h-5 text-gray-400 hover:text-gray-700 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})])],-1))],8,X))),128))])])])),t("div",it,[t("span",null," Showing 1 to "+r(k.value.length)+" of "+r(p(i).products.length)+" results ",1),e[16]||(e[16]=b('<div class="flex space-x-2"><button class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-md hover:bg-gray-100"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button><button class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-md hover:bg-gray-100"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div>',1))])])]))}};export{gt as default};
