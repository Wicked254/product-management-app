import{r as u,i as P,s as S,j as h,c as a,a as t,F as f,w as C,b as V,t as x,e as i,v as c,p as q,q as F,h as U,o as d}from"./index--3hVSHPX.js";import{u as E}from"./product-VU_Luj9g.js";import{u as j}from"./index-D5iDdLy3.js";const B={class:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4"},D={key:0,class:"text-center"},I={class:"w-full max-w-3xl bg-white rounded-lg shadow-md p-6"},M={key:0,class:"text-red-600 bg-red-50 p-3 rounded-lg border border-red-200 font-medium"},T={class:"space-y-4"},L={class:"space-y-4 pt-4"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A={class:"relative mt-1"},N=["value"],H={__name:"EditProductView",setup(R){const g=E(),p=j(),n=S(),b=U(),y=u([]),m=u(!1),o=u({title:"",description:"",category:"",price:"",stock:"",thumbnail:""}),l=u(null);P(async()=>{m.value=!0;try{const s=await g.fetchProductById(n.params.id);o.value={title:s.title,description:s.description,category:s.category,price:s.price.toString(),stock:s.stock.toString(),thumbnail:s.thumbnail};const e=await h.get("https://dummyjson.com/products/category-list");y.value=e.data.map(r=>({slug:r,name:r.split("-").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" ")}))}catch(s){console.error("Failed to load product:",s),l.value="Failed to load product details",p.error("Failed to load product for editing")}finally{m.value=!1}});const k=()=>{b.push(`/products/${n.params.id}`)},w=async()=>{if(!o.value.title||!o.value.price||!o.value.stock||!o.value.category){l.value="Product Title, Price, Stock, and Category are required.";return}l.value=null;try{const s={...o.value,price:parseFloat(o.value.price),stock:parseInt(o.value.stock,10)};await g.updateProduct(n.params.id,s),p.success("Product updated successfully!"),b.push(`/products/${n.params.id}`)}catch(s){l.value=s.message||"An error occurred while updating the product.",p.error("Failed to update product")}};return(s,e)=>(d(),a("div",B,[m.value?(d(),a("div",D,[...e[5]||(e[5]=[t("p",{class:"text-gray-600"},"Loading product...",-1)])])):(d(),a(f,{key:1},[e[16]||(e[16]=t("div",{class:"w-full max-w-3xl mb-4"},[t("h1",{class:"text-xl font-medium text-gray-800"},"Edit Product"),t("p",{class:"text-sm text-gray-500"}," Update the details below to modify your product. ")],-1)),t("div",I,[t("form",{onSubmit:C(w,["prevent"]),class:"space-y-6"},[l.value?(d(),a("p",M," Error: "+x(l.value),1)):V("",!0),t("div",T,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Product Information",-1)),e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Product Title",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.title=r),placeholder:"Enter product title",class:"w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[c,o.value.title]]),e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Product Description",-1)),i(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.description=r),placeholder:"Provide a detailed description of the product",rows:"4",class:"w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 resize-none"},null,512),[[c,o.value.description]])]),t("div",L,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Pricing & Inventory",-1)),t("div",$,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Price",-1)),t("div",A,[e[9]||(e[9]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.price=r),type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"w-full p-3 pl-7 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[c,o.value.price]])])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Stock Quantity",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.stock=r),type:"number",min:"0",placeholder:"Enter stock quantity",class:"w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[c,o.value.stock]])])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Category",-1)),i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.value.category=r),class:"w-full p-3 border border-gray-300 rounded-md bg-white focus:ring-indigo-500 focus:border-indigo-500",required:""},[e[12]||(e[12]=t("option",{value:"",disabled:""},"Select a category",-1)),(d(!0),a(f,null,F(y.value,r=>(d(),a("option",{key:r.slug,value:r.slug},x(r.name),9,N))),128))],512),[[q,o.value.category]])])]),t("div",{class:"flex justify-end pt-4 space-x-3 border-t"},[t("button",{type:"button",onClick:k,class:"py-2 px-6 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition duration-150 font-medium"}," Cancel "),e[15]||(e[15]=t("button",{type:"submit",class:"py-2 px-6 text-white rounded-md transition duration-150 font-medium bg-indigo-600 hover:bg-indigo-700"}," Save Changes ",-1))])],32)])],64))]))}};export{H as default};
